<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kxjl.tasktransferplat.dao.plus.CompanyMapper">
    <resultMap id="BaseResultMap" type="com.kxjl.tasktransferplat.pojo.Company">
        <id column="Id" jdbcType="BIGINT" property="id"/>
        <result column="CompanyName" jdbcType="VARCHAR" property="companyName"/>
        <result column="CompanyPhone" jdbcType="VARCHAR" property="companyPhone"/>
        <result column="CompanyType" jdbcType="INTEGER" property="companyType"/>
        <result column="CompanyAddressId" jdbcType="BIGINT" property="companyAddressId"/>
        <result column="CompanyAddressDetail" jdbcType="VARCHAR" property="companyAddressDetail"/>
        <result column="CreateTime" jdbcType="VARCHAR" property="createTime"/>
        <result column="DataState" jdbcType="INTEGER" property="dataState"/>
        <result column="AuditFlag" jdbcType="VARCHAR" property="auditFlag"/>
        <result column="AuditReason" jdbcType="VARCHAR" property="auditReason"/>
        <result column="Province" jdbcType="VARCHAR" property="province"/>
        <result column="City" jdbcType="VARCHAR" property="city"/>
        <result column="District" jdbcType="VARCHAR" property="district"/>
        <result column="AreaCode" jdbcType="VARCHAR" property="areaCode"/>
    </resultMap>
    <sql id="Base_Column_List">
        Id, CompanyName, CompanyPhone, CompanyAddressId, CompanyAddressDetail, CreateTime,
        DataState, AuditFlag, AuditReason, Province, City, District, AreaCode,CompanyType
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_company
        where Id = #{id,jdbcType=BIGINT} and DataState=1
    </select>
    <update id="deleteByPrimaryKey" parameterType="java.lang.Long">
        update t_company set DataState = 2  where Id = #{id,jdbcType=BIGINT};
    </update>
    <insert id="insert" parameterType="com.kxjl.tasktransferplat.pojo.Company">
        INSERT INTO t_company (Id, CompanyName, CompanyPhone,
                               CompanyAddressId, CompanyAddressDetail,
                               CreateTime, DataState, AuditFlag,
                               AuditReason, Province, City,
                               District, AreaCode, CompanyType)
        VALUES (#{id,jdbcType=BIGINT}, #{companyName,jdbcType=VARCHAR}, #{companyPhone,jdbcType=VARCHAR},
                                       #{companyAddressId,jdbcType=BIGINT}, #{companyAddressDetail,jdbcType=VARCHAR},
                                       #{createTime,jdbcType=VARCHAR}, #{dataState,jdbcType=INTEGER},
                                       #{auditFlag,jdbcType=VARCHAR},
                                       #{auditReason,jdbcType=VARCHAR}, #{province,jdbcType=VARCHAR},
                                       #{city,jdbcType=VARCHAR},
                #{district,jdbcType=VARCHAR}, #{areaCode,jdbcType=VARCHAR}, #{companyType,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" parameterType="com.kxjl.tasktransferplat.pojo.Company">
        insert into t_company
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                Id,
            </if>
            <if test="companyName != null">
                CompanyName,
            </if>
            <if test="companyPhone != null">
                CompanyPhone,
            </if>
            <if test="companyAddressId != null">
                CompanyAddressId,
            </if>
            <if test="companyAddressDetail != null">
                CompanyAddressDetail,
            </if>
            <if test="createTime != null">
                CreateTime,
            </if>
            <if test="dataState != null">
                DataState,
            </if>
            <if test="auditFlag != null">
                AuditFlag,
            </if>
            <if test="auditReason != null">
                AuditReason,
            </if>
            <if test="province != null">
                Province,
            </if>
            <if test="city != null">
                City,
            </if>
            <if test="district != null">
                District,
            </if>
            <if test="areaCode != null">
                AreaCode,
            </if>
            <if test="companyType != null">
                CompanyType,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="companyName != null">
                #{companyName,jdbcType=VARCHAR},
            </if>
            <if test="companyPhone != null">
                #{companyPhone,jdbcType=VARCHAR},
            </if>
            <if test="companyAddressId != null">
                #{companyAddressId,jdbcType=BIGINT},
            </if>
            <if test="companyAddressDetail != null">
                #{companyAddressDetail,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="dataState != null">
                #{dataState,jdbcType=INTEGER},
            </if>
            <if test="auditFlag != null">
                #{auditFlag,jdbcType=VARCHAR},
            </if>
            <if test="auditReason != null">
                #{auditReason,jdbcType=VARCHAR},
            </if>
            <if test="province != null">
                #{province,jdbcType=VARCHAR},
            </if>
            <if test="city != null">
                #{city,jdbcType=VARCHAR},
            </if>
            <if test="district != null">
                #{district,jdbcType=VARCHAR},
            </if>
            <if test="areaCode != null">
                #{areaCode,jdbcType=VARCHAR},
            </if>
            <if test="companyType != null">
                #{companyType,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.kxjl.tasktransferplat.pojo.Company">
        update t_company
        <set>
            <if test="companyName != null">
                CompanyName = #{companyName,jdbcType=VARCHAR},
            </if>
            <if test="companyPhone != null">
                CompanyPhone = #{companyPhone,jdbcType=VARCHAR},
            </if>
            <if test="companyAddressId != null">
                CompanyAddressId = #{companyAddressId,jdbcType=BIGINT},
            </if>
            <if test="companyAddressDetail != null">
                CompanyAddressDetail = #{companyAddressDetail,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                CreateTime = #{createTime,jdbcType=VARCHAR},
            </if>
            <if test="dataState != null">
                DataState = #{dataState,jdbcType=INTEGER},
            </if>
            <if test="auditFlag != null">
                AuditFlag = #{auditFlag,jdbcType=VARCHAR},
            </if>
            <if test="auditReason != null">
                AuditReason = #{auditReason,jdbcType=VARCHAR},
            </if>
            <if test="province != null">
                Province = #{province,jdbcType=VARCHAR},
            </if>
            <if test="city != null">
                City = #{city,jdbcType=VARCHAR},
            </if>
            <if test="district != null">
                District = #{district,jdbcType=VARCHAR},
            </if>
            <if test="areaCode != null">
                AreaCode = #{areaCode,jdbcType=VARCHAR},
            </if>
            <if test="companyType != null">
                CompanyType = #{companyType,jdbcType=INTEGER},
            </if>
        </set>
        where Id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.kxjl.tasktransferplat.pojo.Company">
        UPDATE t_company
        SET CompanyName          = #{companyName,jdbcType=VARCHAR},
            CompanyPhone         = #{companyPhone,jdbcType=VARCHAR},
            CompanyAddressId     = #{companyAddressId,jdbcType=BIGINT},
            CompanyAddressDetail = #{companyAddressDetail,jdbcType=VARCHAR},
            CreateTime           = #{createTime,jdbcType=VARCHAR},
            DataState            = #{dataState,jdbcType=INTEGER},
            AuditFlag            = #{auditFlag,jdbcType=VARCHAR},
            AuditReason          = #{auditReason,jdbcType=VARCHAR},
            Province             = #{province,jdbcType=VARCHAR},
            City                 = #{city,jdbcType=VARCHAR},
            District             = #{district,jdbcType=VARCHAR},
            AreaCode             = #{areaCode,jdbcType=VARCHAR}
            CompanyType             = #{companyType,jdbcType=INTEGER}
        WHERE Id = #{id,jdbcType=BIGINT}
    </update>


    <select id="selectList"
            resultMap="BaseResultMap"
            parameterType="com.kxjl.tasktransferplat.pojo.Company">
        select
        <include refid="Base_Column_List"/>
        from t_company c

        where 1=1 and c.DataState=1
        <if test=" id !=null and id !='' ">
            and c.id = #{id}
        </if>
        <if test=" auditFlag !=null and auditFlag !='' ">
            and c.auditFlag = #{auditFlag}
        </if>
        <if test=" companyPhone !=null and companyPhone !='' ">
            and c.companyPhone like concat ('%', #{companyPhone},'%')
        </if>

        <if test=" companyName !=null and companyName !='' ">
          and c.companyName like  concat ('%', #{companyName},'%')
        </if>
    </select>


    <select id="selectByAreaCode" resultType="com.kxjl.tasktransferplat.pojo.Company">
        select *
        from t_company
        where 1=1
        and left(areaCode, 4) = #{provinceCityCode}
        AND DataState = 1
    </select>


    <select id="selectPage"
            resultMap="BaseResultMap"
            parameterType="com.kxjl.tasktransferplat.pojo.Company">
        select
        <include refid="Base_Column_List"/>
        from t_company c

        where 1=1 and c.DataState=1
        <if test=" id !=null and id !='' ">
            and c.id = #{id}
        </if>
        <if test=" auditFlag !=null and auditFlag !='' ">
            and c.auditFlag = #{auditFlag}
        </if>
        <if test=" companyPhone !=null and companyPhone !='' ">
            and c.companyPhone like concat ('%', #{companyPhone},'%')
        </if>
        <if test=" companyName !=null and companyName !='' ">
            and c.companyName like  concat ('%', #{companyName},'%')
        </if>

    </select>


    <select id="selectUnAuditCompanyList"
            resultMap="BaseResultMap"
            parameterType="com.kxjl.tasktransferplat.pojo.Company">
        select
        <include refid="Base_Column_List"/>
        from t_company c

        where 1=1 and auditFlag in (-1,0) and DataState=1
        <if test=" id !=null and id !='' ">
            and c.id = #{id}
        </if>
        <if test=" companyPhone !=null and companyPhone !='' ">
            and c.companyPhone like concat ('%', #{companyPhone},'%')
        </if>
        <if test=" companyName !=null and companyName !='' ">
            and c.companyName like  concat ('%', #{companyName},'%')
        </if>

    </select>

    <select id="allCompanyList" resultType="com.kxjl.tasktransferplat.pojo.Company">
        SELECT * FROM t_company WHERE auditFlag = 1 AND DataState = 1
    </select>

    <select id="selectByCompanyName" resultType="com.kxjl.tasktransferplat.pojo.Company">
        SELECT * FROM t_company WHERE CompanyName = #{companyName} AND DataState = 1
    </select>

    <select id="selectByCompanyPhone" resultType="com.kxjl.tasktransferplat.pojo.Company">
        SELECT * FROM t_company WHERE CompanyPhone = #{companyPhone} AND DataState = 1
    </select>

    <select id="selectByProvinceAndCityCode" resultType="com.kxjl.tasktransferplat.pojo.Company">
        SELECT * FROM t_company WHERE LEFT(AreaCode,4) = #{provinceCityCode}  AND DataState = 1 AND AuditFlag != 2
    </select>

    <update id="delete"
            parameterType="com.kxjl.tasktransferplat.pojo.Company">
          update t_company set DataState = 2  where Id = #{id,jdbcType=BIGINT};

    </update>

</mapper>